#!/bin/bash
# This file prepares WireGaurd configuration for consumer (OpenStack)

# $1 - donor public ip
# $2 - Wireguard VPN subnet
# $3 - consumer IP
# $4 - donor public key file

if [ "$1" == "" ]
then
  echo "Usage: $0 <VPN_CONSUMER_IP>"
  exit 1
fi

echo "[Interface]"
echo "PostUp = wg set %i private-key /etc/wireguard/private.key"
echo "Address =" $1
echo "SaveConfig = true"

